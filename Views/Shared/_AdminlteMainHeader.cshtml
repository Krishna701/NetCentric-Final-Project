@using Microsoft.AspNetCore.Identity
@using EGovProject.Areas.Identity.Data

@inject SignInManager<LoginRegistrationUser> SignInManager
@inject UserManager<LoginRegistrationUser> UserManager

@inject EGovProject.Data.LoginRegistrationDbContext Context

@{
    var user = await UserManager.GetUserAsync(User);
}

<header class="main-header">

    <div class="navbar-custom-menu">
        <ul class="nav navbar-nav">

            @if (Model != null)
            {<!-- User Account: style can be found in dropdown.less -->
                <li class="dropdown user user-menu">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <img src="/images/@user.ProfilePicture" class="user-image profilePicture" alt="User Image">
                        <span class="hidden-xs" style="color:fff !important;">@(user.FirstName ?? user.UserName)</span>
                    </a>
                    <ul class="dropdown-menu">
                        <!-- User image -->
                        <li class="user-header">
                            <img src="/images/@user.ProfilePicture" class="img-circle profilePicture" alt="User Image">

                            <p>
                                @(user.Fullname ?? user.Fullname)
                            </p>

                            <p>
                                @(user.Email ?? user.Email)
                            </p>
                        </li>

                        <!-- Menu Footer-->

                        <li class="user-footer">

                            <div class="pull-left">
                                <a id="manage" class="btn btn-default btn-flat" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage">Setting</a>

                            </div>
                            <div class="pull-right">
                                <form asp-area="Identity" asp-page="/Account/Logout" id="logoutForm" class="navbar-right" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">

                                    <button type="submit" class="btn btn-default btn-flat"> Log Out</button>

                                </form>
                            </div>

                        </li>
                    </ul>
                </li>
            }




        </ul>
    </div>
    </nav>
</header>